function wppaGalleryEvaluate(){var e=!0;jQuery("#wppagallery-galery-type-tr").hide(),jQuery("#wppagallery-slides-type-tr").hide(),jQuery("#wppagallery-single-type-tr").hide(),jQuery("#wppagallery-search-type-tr").hide(),jQuery("#wppagallery-miscel-type-tr").hide(),jQuery("#wppagallery-album-type-tr").hide(),jQuery("#wppagallery-album-real-tr").hide(),jQuery("#wppagallery-album-real-search-tr").hide(),jQuery("#wppagallery-album-realopt-tr").hide(),jQuery("#wppagallery-album-virt-tr").hide(),jQuery("#wppagallery-album-virt-cover-tr").hide(),jQuery("#wppagallery-owner-tr").hide(),jQuery("#wppagallery-owner-parent-tr").hide(),jQuery("#wppagallery-album-parent-tr").hide(),jQuery("#wppagallery-album-count-tr").hide(),jQuery("#wppagallery-photo-count-tr").hide(),jQuery("#wppagallery-albumcat-tr").hide(),jQuery("#wppagallery-photo-tr").hide(),jQuery("#wppagallery-photo-preview-tr").hide(),jQuery("#wppagallery-phototags-tr").hide(),jQuery("#wppagallery-search-tr").hide(),jQuery("#wppagallery-taglist-tr").hide(),jQuery("#wppagallery-album-super-tr").hide(),jQuery("#wppagallery-calendar-tr").hide(),jQuery("#wppagallery-tags-cats-tr").hide(),jQuery("#wppagallery-landing-tr").hide(),jQuery("#wppagallery-rootalbum-tr").hide(),jQuery("#wppagallery-admins-tr").hide();var a,r,l="[wppa",p="",t="",y="",o="",u="",s="",w="",g="",c="",i="",h="",n="",d="",j="",Q=!1,m=!1,b=!1,v=!1,k=!1,f=!1,E=!1,x=!1,I=!1,P=!1,T="",S="",N="",A="",B="",C=!1,G=!1,z="",D="0",M="0",_="",q="none",L="";switch(jQuery("select").css("color","#700"),jQuery("#wppagallery-album-parent-parent").css("color","#070"),jQuery("#wppagallery-align").css("color","#070"),p=jQuery("#wppagallery-top-type").val(),wppaIsEmpty(p)||jQuery("#wppagallery-top-type").css("color","#070"),p){case"galerytype":jQuery("#wppagallery-galery-type-tr").show(),t=jQuery("#wppagallery-galery-type").val(),Q=!0,b=!0,jQuery("#wppagallery-album-type-tr").show(),wppaIsEmpty(t)||(jQuery("#wppagallery-galery-type").css("color","#070"),y=t);break;case"slidestype":jQuery("#wppagallery-slides-type-tr").show(),t=jQuery("#wppagallery-slides-type").val(),m=!0,b=!0,jQuery("#wppagallery-album-type-tr").show(),wppaIsEmpty(t)||(jQuery("#wppagallery-slides-type").css("color","#070"),o=t);break;case"singletype":jQuery("#wppagallery-single-type-tr").show(),t=jQuery("#wppagallery-single-type").val(),v=!0,jQuery("#wppagallery-photo-tr").show(),wppaIsEmpty(t)||jQuery("#wppagallery-single-type").css("color","#070");break;case"searchtype":switch(jQuery("#wppagallery-search-type-tr").show(),t=jQuery("#wppagallery-search-type").val(),I=!0,s=t,wppaIsEmpty(t)||jQuery("#wppagallery-search-type").css("color","#070"),t){case"search":jQuery("#wppagallery-search-tr").show(),jQuery("#wppagallery-root").prop("checked")&&jQuery("#wppagallery-rootalbum-tr").show(),M=jQuery("#wppagallery-rootalbum").val(),jQuery("#wppagallery-landing-tr").show(),D=jQuery("#wppagallery-landing").val();break;case"supersearch":break;case"tagcloud":case"multitag":if(jQuery("#wppagallery-taglist-tr").show(),!jQuery("#wppagallery-alltags").prop("checked")){E=!0,jQuery("#wppagallery-seltags").show(),r=jQuery(".wppagallery-taglist-tags");R=[];for(O=0,a=0;O<r.length;)r[O].selected&&(R[a]=r[O].value,a++),O++;T=wppaArrayToEnum(R,",")}break;case"superview":jQuery("#wppagallery-album-super-tr").show(),g=jQuery("#wppagallery-album-super-parent").val();break;case"calendar":jQuery("#wppagallery-calendar-tr").show(),jQuery("#wppagallery-album-super-tr").show(),B=jQuery("#wppagallery-calendar-type").val(),C=jQuery("#wppagallery-calendar-reverse").prop("checked"),G=jQuery("#wppagallery-calendar-allopen").prop("checked"),c=jQuery("#wppagallery-album-super-parent").val()}break;case"misceltype":switch(jQuery("#wppagallery-miscel-type-tr").show(),t=jQuery("#wppagallery-miscel-type").val(),P=!0,wppaIsEmpty(t)||jQuery("#wppagallery-miscel-type").css("color","#070"),t){case"generic":w=t;break;case"upload":w=t,jQuery("#wppagallery-album-realopt-tr").show(),g=(g=jQuery("#wppagallery-album-realopt").val()).toString().replace(/,/g,".");break;case"landing":case"stereo":w=t;break;case"choice":w=t,jQuery("#wppagallery-admins-tr").show(),_=wppaGetSelectionEnumByClass(".wppagallery-admin",",")}}if(wppaIsEmpty(t)||(l+=' type="'+t+'"'),b)switch(u=jQuery("#wppagallery-album-type").val(),wppaIsEmpty(u)||jQuery("#wppagallery-album-type").css("color","#070"),u){case"real":if(jQuery("#wppagallery-album-real-tr").show(),jQuery("#wppagallery-album-real-search-tr").show(),jQuery("#wppagallery-album-real-search"))if(jQuery("#wppagallery-album-real-search").val()){var H=jQuery("#wppagallery-album-real-search").val().toLowerCase();if(!wppaIsEmpty(H)&&(albums=jQuery(".wppagallery-album-r"),albums.length>0))for(var O=0;O<albums.length;)-1==albums[O].innerHTML.toLowerCase().search(H)?(jQuery(albums[O]).removeAttr("selected"),jQuery(albums[O]).hide()):jQuery(albums[O]).show(),O++}else jQuery(".wppagallery-album-r").show();g=(g=jQuery("#wppagallery-album-real").val()).toString().replace(/,/g,".");break;case"virtual":if("cover"==t?(jQuery("#wppagallery-album-virt-cover-tr").show(),g=jQuery("#wppagallery-album-virt-cover").val()):(jQuery("#wppagallery-album-virt-tr").show(),g=jQuery("#wppagallery-album-virt").val()),!wppaIsEmpty(g))switch(jQuery("#wppagallery-album-virt").css("color","#070"),g){case"#topten":case"#lasten":case"#featen":case"#comten":jQuery("#wppagallery-album-realopt-tr").show(),jQuery(".wppagallery-album-ropt").length>0?c=wppaGetSelectionEnumByClass(".wppagallery-album-ropt","."):-1!=(c=jQuery("#wppagallery-album-realopt").val()).indexOf(",")&&(parr=c.split(","),c=wppaArrayToEnum(parr,".")),""==c&&(c="0"),jQuery("#wppagallery-photo-count-tr").show(),i=jQuery("#wppagallery-photo-count").val();break;case"#tags":jQuery("#wppagallery-phototags-tr").show(),jQuery("#wppagallery-tags-cats-tr").show(),jQuery("[name=andor]:checked").val()||jQuery("#wppagallery-or").prop("checked",!0),z="or"==jQuery("[name=andor]:checked").val()?";":",",f=!0,r=jQuery(".wppagallery-phototags");var R=[];for(O=0,a=0;O<r.length;)r[O].selected&&(R[a]=r[O].value,a++),O++;N=wppaArrayToEnum(R,z);break;case"#last":jQuery("#wppagallery-album-parent-tr").show(),c=jQuery("#wppagallery-album-parent-parent").val(),jQuery("#wppagallery-album-count-tr").show(),i=jQuery("#wppagallery-album-count").val();break;case"#cat":jQuery("#wppagallery-albumcat-tr").show(),jQuery("#wppagallery-tags-cats-tr").show(),jQuery("[name=andor]:checked").val()||jQuery("#wppagallery-or").prop("checked",!0),z="or"==jQuery("[name=andor]:checked").val()?";":",",x=!0,r=jQuery(".wppagallery-albumcat");var U=[];for(O=0,a=0;O<r.length;)r[O].selected&&(U[a]=r[O].value,a++),O++;A=wppaArrayToEnum(U,z);break;case"#owner":case"#upldr":jQuery("#wppagallery-owner-tr").show(),k=!0,S=jQuery("#wppagallery-owner").val(),wppaIsEmpty(S)||(jQuery("#wppagallery-owner").css("color","#070"),jQuery("#wppagallery-owner-parent-tr").show(),c=(c=wppaGetSelectionEnumByClass(".wppagallery-album-p",".")).toString().replace("zero","0"));break;case"#all":break;default:null!=g&&alert(wppaUIERR+": "+g)}break;default:g=""}wppaIsEmpty(g)||(l+=' album="'+g,""!=S&&(l+=","+S),""==c&&""!=i&&(c="0"),""!=c&&(l+=","+c),""!=i&&(l+=","+i),""!=N&&(l+=","+N),""!=A&&(l+=","+A),l+='"'),v&&(h=jQuery("#wppagallery-photo").val())&&(n=(n=(n=h.replace(/\//g,"")).split("."))[0],jQuery("#wppagallery-photo-preview-tr").show(),wppaTinyMcePhotoPreview(h),l+=' photo="'+n+'"',jQuery("#wppagallery-photo").css("color","#070")),"search"==t&&(d=jQuery("#wppagallery-sub").prop("checked"),j=jQuery("#wppagallery-root").prop("checked"),d&&(l+=' sub="1"'),j&&(l+="0"!=M?' root="#'+M+'"':' root="1"'),"0"!=D&&(l+=' landing="'+D+'"')),"tagcloud"!=t&&"multitag"!=t||""!=T&&(l+=' taglist="'+T+'"'),"calendar"==t&&(l+=' calendar="'+B+'"',c&&(l+=' album="'+c+'"'),C&&(l+=' reverse="1"'),G&&(l+=' all="1"')),"choice"==t&&_.length>0&&(l+=' admin="'+_+'"');var W=document.getElementById("wppagallery-size").value,X=W.split(",");if(X[1]?"auto"==X[0]&&parseInt(X[1])==X[1]&&X[1]>100?jQuery("#wppagallery-size").css("color","#070"):(W=0,jQuery("#wppagallery-size").css("color","#700")):(""!=W&&"auto"!=W&&parseInt(W)!=W&&(W=0,jQuery("#wppagallery-size").css("color","#700")),W<0&&(W=-W),W<100&&(W/=100),jQuery("#wppagallery-size").css("color","#070")),0!=W&&(l+=' size="'+W+'"'),"none"!=(q=jQuery("#wppagallery-align").val())&&(l+=' align="'+q+'"'),l+="]"+(r=(r=(r=(r=(r=document.getElementById("wppagallery-shortcode-preview").value).replace(/&quot;/g,'"')).split("]"))[1]).split("["))[0]+"[/wppa]",l=l.replace(/"/g,"&quot;"),L='<input type="text" id="wppagallery-shortcode-preview" style="background-color:#ddd; width:100%; height:26px;" value="'+l+'" />',jQuery("#wppagallery-shortcode-preview-container").html(L),!(e=!(""==g&&b||""==h&&v||""==S&&k||""==T&&E||""==y&&Q||""==o&&m||""==s&&I||""==w&&P||""==N&&f||""==A&&x))){var F="";""==g&&b&&(F+="Need album\n"),""==h&&v&&(F+="Need photo\n"),""==S&&k&&(F+="Need owner"),""==T&&E&&(F+="Need taglist"),""==y&&Q&&(F+="Need galType"),""==o&&m&&(F+="Need slideType"),""==s&&I&&(F+="Need searchType"),""==w&&P&&(F+="Need miscType"),""==N&&f&&(F+="Need tags"),""==A&&x&&(F+="Need cats")}e?(jQuery("#wppagallery-submit").show(),jQuery("#wppagallery-submit-notok").hide()):(jQuery("#wppagallery-submit").hide(),jQuery("#wppagallery-submit-notok").show())}function wppaTinyMcePhotoPreview(e){if("#potd"==e)jQuery("#wppagallery-photo-preview").html(wppaNoPreview);else if(-1!=e.indexOf("xxx")){var a=e.replace("xxx","");jQuery("#wppagallery-photo-preview").html('<video preload="metadata" style="max-width:400px; max-height:300px; margin-top:3px;" controls><source src="'+wppaPhotoDirectory+a+'mp4" type="video/mp4"><source src="'+wppaPhotoDirectory+a+'ogg" type="video/ogg"><source src="'+wppaPhotoDirectory+a+'ogv" type="video/ogg"><source src="'+wppaPhotoDirectory+a+'webm" type="video/webm"></video>')}else jQuery("#wppagallery-photo-preview").html('<img src="'+wppaPhotoDirectory+e+'" style="max-width:400px; max-height:300px;" />')}tinymce.PluginManager.add("wppagallery",function(e,a){e.addButton("wppa_gallery_button",{image:wppaImageDirectory+"albumnew32.png",tooltip:"WPPA+ Shortcode Generator",onclick:function(){var e=jQuery(window).width(),a=jQuery(window).height(),r=720<e?720:e;r-=80,a=jQuery(window).height(),a-=120,tb_show("WPPA+ Shortcode Generator","#TB_inline?width="+r+"&height="+a+"&inlineId=wppagallery-form")}})}),jQuery(function(){var e=wppaGetXmlHttp(),a=wppaAjaxUrl+"?action=wppa&wppa-action=tinymcedialog";e.open("GET",a,!0),e.send(),e.onreadystatechange=function(){if(4==e.readyState&&404!=e.status){var a=e.responseText,r=jQuery(a);r.find("table");r.appendTo("body").hide(),r.find("#wppagallery-submit").click(function(){newShortcode=document.getElementById("wppagallery-shortcode-preview").value,newShortcode=newShortcode.replace(/&quot;/g,'"'),tinyMCE.activeEditor.execCommand("mceInsertContent",0,newShortcode),tb_remove()})}}});